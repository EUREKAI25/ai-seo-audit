<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPECS Techniques â€” AI_SEO_AUDIT</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background: #f5f7fa; line-height: 1.6; color: #2d3748; }
        .container { max-width: 1400px; margin: 0 auto; padding: 40px 20px; }

        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 60px 40px; border-radius: 12px; margin-bottom: 40px; box-shadow: 0 10px 40px rgba(102, 126, 234, 0.3); }
        .header h1 { font-size: 42px; margin-bottom: 15px; font-weight: 700; }
        .header .subtitle { font-size: 20px; opacity: 0.95; margin-bottom: 20px; }
        .header .meta { font-size: 14px; opacity: 0.85; }

        .section { background: white; padding: 40px; border-radius: 12px; margin-bottom: 30px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
        .section h2 { font-size: 32px; color: #1a202c; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 3px solid #667eea; }
        .section h3 { font-size: 24px; color: #2d3748; margin: 30px 0 15px 0; }
        .section h4 { font-size: 18px; color: #4a5568; margin: 20px 0 10px 0; font-weight: 600; }

        .toc { background: #f7fafc; padding: 30px; border-radius: 8px; margin-bottom: 30px; border-left: 4px solid #667eea; }
        .toc h3 { margin-top: 0; color: #667eea; }
        .toc ul { list-style: none; padding-left: 0; }
        .toc li { padding: 8px 0; }
        .toc a { color: #4a5568; text-decoration: none; transition: color 0.2s; }
        .toc a:hover { color: #667eea; }

        .stack-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0; }
        .stack-item { background: #f7fafc; padding: 20px; border-radius: 8px; border-left: 4px solid #667eea; }
        .stack-item h4 { margin-top: 0; color: #667eea; }
        .stack-item ul { margin-left: 20px; color: #4a5568; }

        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th { background: #667eea; color: white; padding: 12px; text-align: left; font-weight: 600; font-size: 14px; }
        td { padding: 12px; border-bottom: 1px solid #e2e8f0; font-size: 14px; vertical-align: top; }
        tr:hover { background: #f7fafc; }

        .object-card { background: #f0f4ff; padding: 25px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #667eea; }
        .object-card h4 { color: #667eea; margin-bottom: 15px; font-size: 20px; }
        .object-card .extends { background: #fff5f5; color: #c53030; padding: 4px 10px; border-radius: 4px; font-size: 12px; display: inline-block; margin-bottom: 15px; font-weight: 600; }
        .object-card .attributes, .object-card .methods { margin: 15px 0; }
        .object-card .attributes h5, .object-card .methods h5 { color: #4a5568; font-size: 14px; margin-bottom: 10px; }
        .object-card ul { margin-left: 20px; color: #4a5568; }
        .object-card li { margin-bottom: 6px; }
        .object-card code { background: white; padding: 2px 6px; border-radius: 3px; font-size: 13px; color: #667eea; }

        .api-endpoint { background: #f7fafc; padding: 20px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #48bb78; }
        .api-endpoint .method { display: inline-block; padding: 4px 10px; border-radius: 4px; font-weight: 600; font-size: 12px; margin-right: 10px; }
        .api-endpoint .method.get { background: #c6f6d5; color: #22543d; }
        .api-endpoint .method.post { background: #bee3f8; color: #2c5282; }
        .api-endpoint .method.put { background: #feebc8; color: #7c2d12; }
        .api-endpoint .method.delete { background: #fed7d7; color: #742a2a; }
        .api-endpoint .route { font-family: 'Monaco', 'Courier New', monospace; font-size: 16px; font-weight: 600; color: #2d3748; }
        .api-endpoint .description { margin: 10px 0; color: #4a5568; }
        .api-endpoint .params { margin-top: 10px; }
        .api-endpoint .params h5 { font-size: 13px; color: #4a5568; margin-bottom: 5px; }
        .api-endpoint .params ul { margin-left: 20px; font-size: 13px; color: #718096; }

        .db-table { background: white; border: 2px solid #e2e8f0; border-radius: 8px; overflow: hidden; margin: 20px 0; }
        .db-table .table-name { background: #667eea; color: white; padding: 15px; font-weight: 600; font-size: 16px; }
        .db-table table { margin: 0; }
        .db-table th { background: #edf2f7; color: #2d3748; font-size: 13px; }

        .folder-tree { background: #1a202c; color: #e2e8f0; padding: 25px; border-radius: 8px; font-family: 'Monaco', 'Courier New', monospace; font-size: 13px; overflow-x: auto; margin: 20px 0; }
        .folder-tree .comment { color: #68d391; }

        .architecture-diagram { background: #f7fafc; padding: 30px; border-radius: 8px; margin: 20px 0; text-align: center; }
        .architecture-diagram pre { font-family: 'Monaco', 'Courier New', monospace; font-size: 13px; display: inline-block; text-align: left; }

        .milestone { background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%); padding: 20px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #667eea; }
        .milestone h4 { color: #667eea; margin-bottom: 10px; }
        .milestone .duration { color: #718096; font-size: 13px; font-weight: 600; margin-bottom: 10px; }
        .milestone ul { margin-left: 20px; color: #4a5568; }

        .warning { background: #fffaf0; border: 2px solid #f6ad55; padding: 20px; border-radius: 8px; margin: 20px 0; }
        .warning h4 { color: #c05621; margin-bottom: 10px; }
        .warning ul { margin-left: 20px; color: #744210; }

        .highlight { background: #f0fff4; border-left: 4px solid #48bb78; padding: 20px; border-radius: 8px; margin: 20px 0; }
        .highlight h4 { color: #22543d; margin-bottom: 10px; }

        code { background: #edf2f7; padding: 2px 6px; border-radius: 3px; font-size: 14px; font-family: 'Monaco', 'Courier New', monospace; }
        pre code { background: transparent; padding: 0; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>âš™ï¸ SPECS Techniques â€” AI_SEO_AUDIT</h1>
            <div class="subtitle">SpÃ©cifications complÃ¨tes MVP Light</div>
            <div class="meta">
                Version 1.0 | 2026-02-11 | Architecture EURKAI conforme
            </div>
        </div>

        <div class="toc section">
            <h3>ğŸ“‹ Table des matiÃ¨res</h3>
            <ul>
                <li><a href="#stack">1. Stack technique</a></li>
                <li><a href="#architecture">2. Architecture gÃ©nÃ©rale</a></li>
                <li><a href="#objets">3. Objets EURKAI</a></li>
                <li><a href="#database">4. Base de donnÃ©es</a></li>
                <li><a href="#api">5. API Endpoints</a></li>
                <li><a href="#fractale">6. Architecture fractale</a></li>
                <li><a href="#modules">7. Modules rÃ©utilisables</a></li>
                <li><a href="#frontend">8. Frontend</a></li>
                <li><a href="#plan">9. Plan de dÃ©veloppement MVP</a></li>
                <li><a href="#post-mvp">10. Post-MVP immÃ©diat</a></li>
            </ul>
        </div>

        <div class="section" id="stack">
            <h2>1. Stack technique</h2>

            <div class="stack-grid">
                <div class="stack-item">
                    <h4>ğŸ Backend</h4>
                    <ul>
                        <li><strong>Python 3.11+</strong></li>
                        <li><strong>FastAPI</strong> (API REST)</li>
                        <li><strong>Pydantic</strong> (validation)</li>
                        <li><strong>SQLAlchemy</strong> (ORM)</li>
                        <li><strong>Alembic</strong> (migrations)</li>
                    </ul>
                </div>

                <div class="stack-item">
                    <h4>ğŸ’¾ Base de donnÃ©es</h4>
                    <ul>
                        <li><strong>PostgreSQL 15+</strong></li>
                        <li><strong>Redis</strong> (cache + queue)</li>
                    </ul>
                </div>

                <div class="stack-item">
                    <h4>ğŸ¤– API IA</h4>
                    <ul>
                        <li><strong>OpenAI API</strong> (GPT-4o-mini)</li>
                        <li>Post-MVP : Claude, Gemini, Perplexity</li>
                    </ul>
                </div>

                <div class="stack-item">
                    <h4>ğŸ’³ Paiement</h4>
                    <ul>
                        <li><strong>Stripe</strong> (checkout + webhooks)</li>
                        <li>Plans : Freemium, Starter, Pro</li>
                    </ul>
                </div>

                <div class="stack-item">
                    <h4>ğŸ¨ Frontend</h4>
                    <ul>
                        <li><strong>HTML5 / CSS3 / JavaScript</strong></li>
                        <li>Pas de framework (MVP light)</li>
                        <li>Fetch API pour appels backend</li>
                    </ul>
                </div>

                <div class="stack-item">
                    <h4>ğŸ“„ GÃ©nÃ©ration docs</h4>
                    <ul>
                        <li><strong>Jinja2</strong> (templates HTML)</li>
                        <li><strong>WeasyPrint</strong> (PDF)</li>
                        <li><strong>JSON-LD</strong> (structured data)</li>
                    </ul>
                </div>

                <div class="stack-item">
                    <h4>âš™ï¸ DevOps</h4>
                    <ul>
                        <li><strong>Docker</strong> + docker-compose</li>
                        <li><strong>GitHub Actions</strong> (CI/CD)</li>
                        <li><strong>Railway / Render</strong> (hÃ©bergement)</li>
                    </ul>
                </div>

                <div class="stack-item">
                    <h4>ğŸŒ I18n</h4>
                    <ul>
                        <li><strong>gettext / babel</strong></li>
                        <li>Langues : FR (MVP), EN/ES/DE/IT (post-MVP)</li>
                        <li>DÃ©tection auto + redirection</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="architecture">
            <h2>2. Architecture gÃ©nÃ©rale</h2>

            <h3>2.1 Structure des dossiers</h3>

            <div class="folder-tree">
AI_SEO_AUDIT/
â”œâ”€â”€ src/                        <span class="comment"># Code source</span>
â”‚   â”œâ”€â”€ core/                   <span class="comment"># Objets EURKAI core</span>
â”‚   â”‚   â”œâ”€â”€ object.py           <span class="comment"># Object base EURKAI</span>
â”‚   â”‚   â”œâ”€â”€ domain/             <span class="comment"># Objets mÃ©tier</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ audit_session.py
â”‚   â”‚   â”‚   â”œâ”€â”€ competitor_analysis.py
â”‚   â”‚   â”‚   â””â”€â”€ optimization_recommendation.py
â”‚   â”‚   â”œâ”€â”€ interface/          <span class="comment"># Adapters</span>
â”‚   â”‚   â”‚   â””â”€â”€ ai_provider.py
â”‚   â”‚   â””â”€â”€ config/             <span class="comment"># Templates & config</span>
â”‚   â”‚       â””â”€â”€ sector_template.py
â”‚   â”‚
â”‚   â”œâ”€â”€ orchestrator/           <span class="comment"># Architecture fractale</span>
â”‚   â”‚   â”œâ”€â”€ audit_orchestrator.py
â”‚   â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”‚   â”œâ”€â”€ audit_agent.py
â”‚   â”‚   â”‚   â”œâ”€â”€ analyze_agent.py
â”‚   â”‚   â”‚   â””â”€â”€ generate_agent.py
â”‚   â”‚   â””â”€â”€ validator.py
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                    <span class="comment"># FastAPI endpoints</span>
â”‚   â”‚   â”œâ”€â”€ main.py
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”‚   â”œâ”€â”€ audit.py
â”‚   â”‚   â”‚   â”œâ”€â”€ payment.py
â”‚   â”‚   â”‚   â””â”€â”€ export.py
â”‚   â”‚   â””â”€â”€ schemas.py          <span class="comment"># Pydantic models</span>
â”‚   â”‚
â”‚   â”œâ”€â”€ database/               <span class="comment"># Base de donnÃ©es</span>
â”‚   â”‚   â”œâ”€â”€ models.py           <span class="comment"># SQLAlchemy models</span>
â”‚   â”‚   â”œâ”€â”€ migrations/         <span class="comment"># Alembic</span>
â”‚   â”‚   â””â”€â”€ session.py
â”‚   â”‚
â”‚   â”œâ”€â”€ services/               <span class="comment"># Services mÃ©tier</span>
â”‚   â”‚   â”œâ”€â”€ ai_service.py       <span class="comment"># Appels API IA</span>
â”‚   â”‚   â”œâ”€â”€ audit_service.py
â”‚   â”‚   â”œâ”€â”€ payment_service.py
â”‚   â”‚   â””â”€â”€ export_service.py
â”‚   â”‚
â”‚   â”œâ”€â”€ templates/              <span class="comment"># Jinja2 templates</span>
â”‚   â”‚   â”œâ”€â”€ landing.html
â”‚   â”‚   â”œâ”€â”€ audit_results.html
â”‚   â”‚   â”œâ”€â”€ export_guide.html
â”‚   â”‚   â””â”€â”€ email/
â”‚   â”‚
â”‚   â”œâ”€â”€ static/                 <span class="comment"># Assets statiques</span>
â”‚   â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â””â”€â”€ images/
â”‚   â”‚
â”‚   â””â”€â”€ utils/                  <span class="comment"># Utilitaires</span>
â”‚       â”œâ”€â”€ cache.py
â”‚       â”œâ”€â”€ rate_limiter.py
â”‚       â””â”€â”€ i18n.py
â”‚
â”œâ”€â”€ tests/                      <span class="comment"># Tests unitaires & intÃ©gration</span>
â”‚   â”œâ”€â”€ test_audit.py
â”‚   â”œâ”€â”€ test_agents.py
â”‚   â””â”€â”€ test_api.py
â”‚
â”œâ”€â”€ docs/                       <span class="comment"># Documentation</span>
â”‚   â”œâ”€â”€ API.md
â”‚   â””â”€â”€ DEPLOYMENT.md
â”‚
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ alembic.ini
â”œâ”€â”€ .env.example
â”œâ”€â”€ README.md
â””â”€â”€ _SUIVI.md
            </div>

            <h3>2.2 Flux de donnÃ©es</h3>

            <div class="architecture-diagram">
                <pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚
â”‚  (Browser)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ HTTPS
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           FastAPI Backend               â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Audit Orchestrator            â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚   â”‚  Agent   â”‚  â”‚  Agent   â”‚   â”‚   â”‚
â”‚  â”‚   â”‚  Audit   â”‚  â”‚ Analyze  â”‚   â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚        â”‚             â”‚          â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚   â”‚   Agent Generate        â”‚   â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚        â”‚                         â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                  â”‚   â”‚
â”‚  â”‚   â”‚Validator â”‚                  â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚PostgreSQLâ”‚      â”‚   Redis   â”‚      â”‚
â”‚  â”‚   DB     â”‚      â”‚  Cache    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ API Calls
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ OpenAI   â”‚
    â”‚   API    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                </pre>
            </div>
        </div>

        <div class="section" id="objets">
            <h2>3. Objets EURKAI</h2>

            <h3>3.1 Object base (EURKAI Core)</h3>

            <div class="object-card">
                <h4>Object</h4>
                <div class="extends">Base EURKAI</div>

                <div class="attributes">
                    <h5>Attributs</h5>
                    <ul>
                        <li><code>ident: str</code> â€” Identifiant unique (UUID)</li>
                        <li><code>created_at: datetime</code> â€” Date crÃ©ation</li>
                        <li><code>updated_at: datetime</code> â€” Date derniÃ¨re MAJ</li>
                        <li><code>version: str</code> â€” Version de l'objet</li>
                        <li><code>parent: Optional[str]</code> â€” RÃ©fÃ©rence parent (hiÃ©rarchie)</li>
                        <li><code>metadata: Dict[str, Any]</code> â€” MÃ©tadonnÃ©es flexibles</li>
                    </ul>
                </div>

                <div class="methods">
                    <h5>MÃ©thodes</h5>
                    <ul>
                        <li><code>validate() â†’ bool</code> â€” Valide la cohÃ©rence de l'objet</li>
                        <li><code>test() â†’ TestResult</code> â€” Teste le fonctionnement</li>
                        <li><code>to_dict() â†’ dict</code> â€” SÃ©rialise en dict</li>
                        <li><code>from_dict(data: dict) â†’ Object</code> â€” DÃ©sÃ©rialise</li>
                    </ul>
                </div>
            </div>

            <h3>3.2 Objets mÃ©tier (domain)</h3>

            <div class="object-card">
                <h4>AuditSession</h4>
                <div class="extends">extends Object â†’ domain.service.Audit</div>

                <div class="attributes">
                    <h5>Attributs spÃ©cifiques</h5>
                    <ul>
                        <li><code>company_name: str</code> â€” Nom entreprise</li>
                        <li><code>sector: str</code> â€” Secteur d'activitÃ©</li>
                        <li><code>location: str</code> â€” Zone gÃ©ographique</li>
                        <li><code>language: str</code> â€” Langue (fr/en/es/de/it)</li>
                        <li><code>plan: str</code> â€” freemium/starter/pro</li>
                        <li><code>queries: List[str]</code> â€” RequÃªtes testÃ©es</li>
                        <li><code>results: List[AuditResult]</code> â€” RÃ©sultats par requÃªte</li>
                        <li><code>visibility_score: float</code> â€” Score 0-100</li>
                        <li><code>status: str</code> â€” pending/running/completed/failed</li>
                        <li><code>user_email: Optional[str]</code> â€” Email utilisateur</li>
                    </ul>
                </div>

                <div class="methods">
                    <h5>MÃ©thodes</h5>
                    <ul>
                        <li><code>execute() â†’ AuditSession</code> â€” Lance l'audit complet</li>
                        <li><code>analyze() â†’ CompetitorAnalysis</code> â€” Analyse rÃ©sultats</li>
                        <li><code>generate_score() â†’ float</code> â€” Calcule score visibilitÃ©</li>
                        <li><code>export(format: str) â†’ bytes</code> â€” Export PDF/JSON/HTML</li>
                    </ul>
                </div>
            </div>

            <div class="object-card">
                <h4>AIProvider</h4>
                <div class="extends">extends Object â†’ interface.adapter.APIAdapter</div>

                <div class="attributes">
                    <h5>Attributs spÃ©cifiques</h5>
                    <ul>
                        <li><code>name: str</code> â€” chatgpt/claude/gemini/perplexity</li>
                        <li><code>api_endpoint: str</code> â€” URL API</li>
                        <li><code>model: str</code> â€” ModÃ¨le utilisÃ©</li>
                        <li><code>api_key: str</code> â€” ClÃ© API (chiffrÃ©e)</li>
                        <li><code>rate_limit: int</code> â€” RequÃªtes/minute max</li>
                        <li><code>timeout: int</code> â€” Timeout secondes</li>
                    </ul>
                </div>

                <div class="methods">
                    <h5>MÃ©thodes</h5>
                    <ul>
                        <li><code>query(prompt: str, context: dict) â†’ AIResponse</code> â€” Interroge l'IA</li>
                        <li><code>parse_response(raw: str) â†’ dict</code> â€” Parse rÃ©ponse brute</li>
                        <li><code>extract_mentions(text: str) â†’ List[str]</code> â€” Extrait mentions entreprises</li>
                        <li><code>check_rate_limit() â†’ bool</code> â€” VÃ©rifie quota</li>
                    </ul>
                </div>
            </div>

            <div class="object-card">
                <h4>CompetitorAnalysis</h4>
                <div class="extends">extends Object â†’ domain.service.Analysis</div>

                <div class="attributes">
                    <h5>Attributs spÃ©cifiques</h5>
                    <ul>
                        <li><code>target_company: str</code> â€” Entreprise auditÃ©e</li>
                        <li><code>competitors: List[Competitor]</code> â€” Concurrents identifiÃ©s</li>
                        <li><code>visibility_gaps: List[Gap]</code> â€” Ã‰carts dÃ©tectÃ©s</li>
                        <li><code>recommendations_priority: List[str]</code> â€” PrioritÃ©s</li>
                    </ul>
                </div>

                <div class="methods">
                    <h5>MÃ©thodes</h5>
                    <ul>
                        <li><code>identify_gaps() â†’ List[Gap]</code> â€” Identifie Ã©carts vs concurrents</li>
                        <li><code>rank_competitors() â†’ List[Competitor]</code> â€” Classe concurrents par visibilitÃ©</li>
                        <li><code>suggest_queries() â†’ List[str]</code> â€” SuggÃ¨re requÃªtes pertinentes</li>
                    </ul>
                </div>
            </div>

            <div class="object-card">
                <h4>OptimizationRecommendation</h4>
                <div class="extends">extends Object â†’ domain.product.Deliverable</div>

                <div class="attributes">
                    <h5>Attributs spÃ©cifiques</h5>
                    <ul>
                        <li><code>type: str</code> â€” content/structured_data/editorial</li>
                        <li><code>priority: int</code> â€” 1-5 (1 = urgent)</li>
                        <li><code>title: str</code> â€” Titre recommandation</li>
                        <li><code>description: str</code> â€” Explication dÃ©taillÃ©e</li>
                        <li><code>content: dict</code> â€” Contenu gÃ©nÃ©rÃ© (texte/JSON-LD/HTML)</li>
                        <li><code>integration_guide: str</code> â€” Instructions intÃ©gration</li>
                        <li><code>estimated_impact: str</code> â€” Impact attendu (low/medium/high)</li>
                    </ul>
                </div>

                <div class="methods">
                    <h5>MÃ©thodes</h5>
                    <ul>
                        <li><code>generate(context: dict) â†’ OptimizationRecommendation</code> â€” GÃ©nÃ¨re solution</li>
                        <li><code>validate() â†’ bool</code> â€” Valide cohÃ©rence</li>
                        <li><code>export(format: str) â†’ str</code> â€” Export HTML/JSON/Markdown</li>
                    </ul>
                </div>
            </div>

            <h3>3.3 Objets systÃ¨me (config)</h3>

            <div class="object-card">
                <h4>SectorTemplate</h4>
                <div class="extends">extends Object â†’ config.template.Template</div>

                <div class="attributes">
                    <h5>Attributs spÃ©cifiques</h5>
                    <ul>
                        <li><code>sector_id: str</code> â€” restaurant/coaching/agence/ecommerce</li>
                        <li><code>sector_name: dict</code> â€” Noms traduits {fr: ..., en: ...}</li>
                        <li><code>queries_patterns: List[str]</code> â€” Templates de requÃªtes</li>
                        <li><code>signals_priority: List[str]</code> â€” Signaux importants secteur</li>
                        <li><code>keywords: List[str]</code> â€” Mots-clefs typiques</li>
                    </ul>
                </div>

                <div class="methods">
                    <h5>MÃ©thodes</h5>
                    <ul>
                        <li><code>customize(company: str, location: str) â†’ List[str]</code> â€” GÃ©nÃ¨re requÃªtes</li>
                        <li><code>generate_queries(count: int) â†’ List[str]</code> â€” GÃ©nÃ¨re N requÃªtes</li>
                        <li><code>adapt_language(lang: str) â†’ SectorTemplate</code> â€” Adapte langue</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="database">
            <h2>4. Base de donnÃ©es</h2>

            <h3>4.1 SchÃ©ma PostgreSQL</h3>

            <div class="db-table">
                <div class="table-name">users</div>
                <table>
                    <thead>
                        <tr>
                            <th>Colonne</th>
                            <th>Type</th>
                            <th>Contraintes</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>id</td>
                            <td>UUID</td>
                            <td>PRIMARY KEY</td>
                            <td>Identifiant unique</td>
                        </tr>
                        <tr>
                            <td>email</td>
                            <td>VARCHAR(255)</td>
                            <td>UNIQUE, NOT NULL</td>
                            <td>Email utilisateur</td>
                        </tr>
                        <tr>
                            <td>company_name</td>
                            <td>VARCHAR(255)</td>
                            <td></td>
                            <td>Nom entreprise</td>
                        </tr>
                        <tr>
                            <td>created_at</td>
                            <td>TIMESTAMP</td>
                            <td>DEFAULT NOW()</td>
                            <td>Date crÃ©ation</td>
                        </tr>
                        <tr>
                            <td>last_audit_at</td>
                            <td>TIMESTAMP</td>
                            <td></td>
                            <td>Dernier audit</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="db-table">
                <div class="table-name">audits</div>
                <table>
                    <thead>
                        <tr>
                            <th>Colonne</th>
                            <th>Type</th>
                            <th>Contraintes</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>id</td>
                            <td>UUID</td>
                            <td>PRIMARY KEY</td>
                            <td>Identifiant unique</td>
                        </tr>
                        <tr>
                            <td>user_id</td>
                            <td>UUID</td>
                            <td>FOREIGN KEY (users.id)</td>
                            <td>RÃ©fÃ©rence utilisateur</td>
                        </tr>
                        <tr>
                            <td>company_name</td>
                            <td>VARCHAR(255)</td>
                            <td>NOT NULL</td>
                            <td>Entreprise auditÃ©e</td>
                        </tr>
                        <tr>
                            <td>sector</td>
                            <td>VARCHAR(100)</td>
                            <td>NOT NULL</td>
                            <td>Secteur activitÃ©</td>
                        </tr>
                        <tr>
                            <td>location</td>
                            <td>VARCHAR(255)</td>
                            <td></td>
                            <td>Zone gÃ©ographique</td>
                        </tr>
                        <tr>
                            <td>language</td>
                            <td>VARCHAR(5)</td>
                            <td>DEFAULT 'fr'</td>
                            <td>Langue audit</td>
                        </tr>
                        <tr>
                            <td>plan</td>
                            <td>VARCHAR(20)</td>
                            <td>NOT NULL</td>
                            <td>freemium/starter/pro</td>
                        </tr>
                        <tr>
                            <td>visibility_score</td>
                            <td>FLOAT</td>
                            <td></td>
                            <td>Score 0-100</td>
                        </tr>
                        <tr>
                            <td>status</td>
                            <td>VARCHAR(20)</td>
                            <td>DEFAULT 'pending'</td>
                            <td>pending/running/completed/failed</td>
                        </tr>
                        <tr>
                            <td>results</td>
                            <td>JSONB</td>
                            <td></td>
                            <td>RÃ©sultats dÃ©taillÃ©s</td>
                        </tr>
                        <tr>
                            <td>created_at</td>
                            <td>TIMESTAMP</td>
                            <td>DEFAULT NOW()</td>
                            <td>Date crÃ©ation</td>
                        </tr>
                        <tr>
                            <td>completed_at</td>
                            <td>TIMESTAMP</td>
                            <td></td>
                            <td>Date fin audit</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="db-table">
                <div class="table-name">queries</div>
                <table>
                    <thead>
                        <tr>
                            <th>Colonne</th>
                            <th>Type</th>
                            <th>Contraintes</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>id</td>
                            <td>UUID</td>
                            <td>PRIMARY KEY</td>
                            <td>Identifiant unique</td>
                        </tr>
                        <tr>
                            <td>audit_id</td>
                            <td>UUID</td>
                            <td>FOREIGN KEY (audits.id)</td>
                            <td>RÃ©fÃ©rence audit</td>
                        </tr>
                        <tr>
                            <td>query_text</td>
                            <td>TEXT</td>
                            <td>NOT NULL</td>
                            <td>RequÃªte posÃ©e Ã  l'IA</td>
                        </tr>
                        <tr>
                            <td>ai_provider</td>
                            <td>VARCHAR(50)</td>
                            <td>NOT NULL</td>
                            <td>chatgpt/claude/gemini/perplexity</td>
                        </tr>
                        <tr>
                            <td>ai_response</td>
                            <td>TEXT</td>
                            <td></td>
                            <td>RÃ©ponse brute de l'IA</td>
                        </tr>
                        <tr>
                            <td>company_mentioned</td>
                            <td>BOOLEAN</td>
                            <td></td>
                            <td>Entreprise citÃ©e ?</td>
                        </tr>
                        <tr>
                            <td>position</td>
                            <td>INTEGER</td>
                            <td></td>
                            <td>Position si citÃ©e (1-N)</td>
                        </tr>
                        <tr>
                            <td>competitors_found</td>
                            <td>JSONB</td>
                            <td></td>
                            <td>Liste concurrents citÃ©s</td>
                        </tr>
                        <tr>
                            <td>created_at</td>
                            <td>TIMESTAMP</td>
                            <td>DEFAULT NOW()</td>
                            <td>Date requÃªte</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="db-table">
                <div class="table-name">recommendations</div>
                <table>
                    <thead>
                        <tr>
                            <th>Colonne</th>
                            <th>Type</th>
                            <th>Contraintes</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>id</td>
                            <td>UUID</td>
                            <td>PRIMARY KEY</td>
                            <td>Identifiant unique</td>
                        </tr>
                        <tr>
                            <td>audit_id</td>
                            <td>UUID</td>
                            <td>FOREIGN KEY (audits.id)</td>
                            <td>RÃ©fÃ©rence audit</td>
                        </tr>
                        <tr>
                            <td>type</td>
                            <td>VARCHAR(50)</td>
                            <td>NOT NULL</td>
                            <td>content/structured_data/editorial</td>
                        </tr>
                        <tr>
                            <td>priority</td>
                            <td>INTEGER</td>
                            <td></td>
                            <td>1-5 (1 = urgent)</td>
                        </tr>
                        <tr>
                            <td>title</td>
                            <td>VARCHAR(255)</td>
                            <td>NOT NULL</td>
                            <td>Titre recommandation</td>
                        </tr>
                        <tr>
                            <td>description</td>
                            <td>TEXT</td>
                            <td></td>
                            <td>Explication</td>
                        </tr>
                        <tr>
                            <td>content</td>
                            <td>JSONB</td>
                            <td></td>
                            <td>Contenu gÃ©nÃ©rÃ©</td>
                        </tr>
                        <tr>
                            <td>integration_guide</td>
                            <td>TEXT</td>
                            <td></td>
                            <td>Instructions</td>
                        </tr>
                        <tr>
                            <td>estimated_impact</td>
                            <td>VARCHAR(20)</td>
                            <td></td>
                            <td>low/medium/high</td>
                        </tr>
                        <tr>
                            <td>created_at</td>
                            <td>TIMESTAMP</td>
                            <td>DEFAULT NOW()</td>
                            <td>Date crÃ©ation</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="db-table">
                <div class="table-name">payments</div>
                <table>
                    <thead>
                        <tr>
                            <th>Colonne</th>
                            <th>Type</th>
                            <th>Contraintes</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>id</td>
                            <td>UUID</td>
                            <td>PRIMARY KEY</td>
                            <td>Identifiant unique</td>
                        </tr>
                        <tr>
                            <td>user_id</td>
                            <td>UUID</td>
                            <td>FOREIGN KEY (users.id)</td>
                            <td>RÃ©fÃ©rence utilisateur</td>
                        </tr>
                        <tr>
                            <td>audit_id</td>
                            <td>UUID</td>
                            <td>FOREIGN KEY (audits.id)</td>
                            <td>RÃ©fÃ©rence audit</td>
                        </tr>
                        <tr>
                            <td>stripe_checkout_id</td>
                            <td>VARCHAR(255)</td>
                            <td>UNIQUE</td>
                            <td>ID session Stripe</td>
                        </tr>
                        <tr>
                            <td>plan</td>
                            <td>VARCHAR(20)</td>
                            <td>NOT NULL</td>
                            <td>starter/pro</td>
                        </tr>
                        <tr>
                            <td>amount</td>
                            <td>INTEGER</td>
                            <td>NOT NULL</td>
                            <td>Montant en centimes</td>
                        </tr>
                        <tr>
                            <td>status</td>
                            <td>VARCHAR(20)</td>
                            <td>DEFAULT 'pending'</td>
                            <td>pending/completed/failed/refunded</td>
                        </tr>
                        <tr>
                            <td>created_at</td>
                            <td>TIMESTAMP</td>
                            <td>DEFAULT NOW()</td>
                            <td>Date crÃ©ation</td>
                        </tr>
                        <tr>
                            <td>paid_at</td>
                            <td>TIMESTAMP</td>
                            <td></td>
                            <td>Date paiement confirmÃ©</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>4.2 Indexes</h3>
            <ul>
                <li><code>CREATE INDEX idx_audits_user_id ON audits(user_id)</code></li>
                <li><code>CREATE INDEX idx_audits_status ON audits(status)</code></li>
                <li><code>CREATE INDEX idx_audits_created_at ON audits(created_at DESC)</code></li>
                <li><code>CREATE INDEX idx_queries_audit_id ON queries(audit_id)</code></li>
                <li><code>CREATE INDEX idx_recommendations_audit_id ON recommendations(audit_id)</code></li>
                <li><code>CREATE INDEX idx_payments_stripe_checkout_id ON payments(stripe_checkout_id)</code></li>
            </ul>
        </div>

        <div class="section" id="api">
            <h2>5. API Endpoints</h2>

            <h3>5.1 Public (landing + audit)</h3>

            <div class="api-endpoint">
                <span class="method get">GET</span>
                <span class="route">/</span>
                <div class="description">Landing page (Jinja2 template)</div>
            </div>

            <div class="api-endpoint">
                <span class="method post">POST</span>
                <span class="route">/api/audit/create</span>
                <div class="description">CrÃ©er un nouvel audit</div>
                <div class="params">
                    <h5>Body (JSON):</h5>
                    <ul>
                        <li><code>company_name</code> (string, required)</li>
                        <li><code>sector</code> (string, required) â€” restaurant/coaching/agence/ecommerce</li>
                        <li><code>location</code> (string, optional)</li>
                        <li><code>email</code> (string, optional)</li>
                        <li><code>plan</code> (string, required) â€” freemium/starter/pro</li>
                    </ul>
                    <h5>Response:</h5>
                    <ul>
                        <li><code>audit_id</code> (uuid)</li>
                        <li><code>status</code> (string) â€” pending/running</li>
                        <li><code>estimated_duration</code> (int) â€” secondes</li>
                    </ul>
                </div>
            </div>

            <div class="api-endpoint">
                <span class="method get">GET</span>
                <span class="route">/api/audit/{audit_id}/status</span>
                <div class="description">Statut d'un audit (polling)</div>
                <div class="params">
                    <h5>Response:</h5>
                    <ul>
                        <li><code>status</code> (string) â€” pending/running/completed/failed</li>
                        <li><code>progress</code> (int) â€” 0-100%</li>
                        <li><code>current_step</code> (string)</li>
                    </ul>
                </div>
            </div>

            <div class="api-endpoint">
                <span class="method get">GET</span>
                <span class="route">/api/audit/{audit_id}/results</span>
                <div class="description">RÃ©sultats d'un audit complÃ©tÃ©</div>
                <div class="params">
                    <h5>Response:</h5>
                    <ul>
                        <li><code>audit</code> (object) â€” DonnÃ©es audit</li>
                        <li><code>visibility_score</code> (float) â€” 0-100</li>
                        <li><code>queries_results</code> (array) â€” DÃ©tail par requÃªte</li>
                        <li><code>competitors</code> (array) â€” Concurrents identifiÃ©s</li>
                        <li><code>recommendations</code> (array) â€” Solutions proposÃ©es</li>
                    </ul>
                </div>
            </div>

            <h3>5.2 Payment (Stripe)</h3>

            <div class="api-endpoint">
                <span class="method post">POST</span>
                <span class="route">/api/payment/create-checkout</span>
                <div class="description">CrÃ©er session Stripe Checkout</div>
                <div class="params">
                    <h5>Body (JSON):</h5>
                    <ul>
                        <li><code>audit_id</code> (uuid, required)</li>
                        <li><code>plan</code> (string, required) â€” starter/pro</li>
                        <li><code>success_url</code> (string, required)</li>
                        <li><code>cancel_url</code> (string, required)</li>
                    </ul>
                    <h5>Response:</h5>
                    <ul>
                        <li><code>checkout_url</code> (string) â€” URL Stripe Checkout</li>
                        <li><code>session_id</code> (string)</li>
                    </ul>
                </div>
            </div>

            <div class="api-endpoint">
                <span class="method post">POST</span>
                <span class="route">/api/payment/webhook</span>
                <div class="description">Webhook Stripe (signature validation)</div>
                <div class="params">
                    <h5>Events gÃ©rÃ©s:</h5>
                    <ul>
                        <li><code>checkout.session.completed</code> â€” Paiement confirmÃ©</li>
                        <li><code>charge.refunded</code> â€” Remboursement</li>
                    </ul>
                </div>
            </div>

            <h3>5.3 Export</h3>

            <div class="api-endpoint">
                <span class="method get">GET</span>
                <span class="route">/api/export/{audit_id}/guide.pdf</span>
                <div class="description">TÃ©lÃ©charger guide PDF (8-12 pages)</div>
                <div class="params">
                    <h5>Headers:</h5>
                    <ul>
                        <li><code>Authorization: Bearer {token}</code> (si plan payant)</li>
                    </ul>
                </div>
            </div>

            <div class="api-endpoint">
                <span class="method get">GET</span>
                <span class="route">/api/export/{audit_id}/recommendations.json</span>
                <div class="description">TÃ©lÃ©charger recommandations JSON (JSON-LD + contenus)</div>
            </div>

            <div class="api-endpoint">
                <span class="method get">GET</span>
                <span class="route">/api/export/{audit_id}/mockups.zip</span>
                <div class="description">TÃ©lÃ©charger maquettes HTML (plan Pro uniquement)</div>
            </div>

            <h3>5.4 Admin (optionnel MVP)</h3>

            <div class="api-endpoint">
                <span class="method get">GET</span>
                <span class="route">/admin/stats</span>
                <div class="description">Statistiques globales (audits, conversions, CA)</div>
            </div>
        </div>

        <div class="section" id="fractale">
            <h2>6. Architecture fractale</h2>

            <h3>6.1 Orchestrateur principal</h3>

            <div class="object-card">
                <h4>AuditOrchestrator</h4>
                <div class="extends">extends Object â†’ flow.orchestrator.Orchestrator</div>

                <div class="attributes">
                    <h5>RÃ´le</h5>
                    <ul>
                        <li>Coordonne les 3 agents (Audit, Analyze, Generate)</li>
                        <li>GÃ¨re le flux de donnÃ©es entre agents</li>
                        <li>Valide chaque Ã©tape via le Validator</li>
                        <li>Ne fait AUCUN traitement mÃ©tier lui-mÃªme</li>
                    </ul>
                </div>

                <div class="methods">
                    <h5>MÃ©thodes</h5>
                    <ul>
                        <li><code>execute(audit_session: AuditSession) â†’ AuditSession</code></li>
                        <li><code>run_agent(agent: Agent, input: dict) â†’ dict</code></li>
                        <li><code>validate_step(step: str, data: dict) â†’ bool</code></li>
                    </ul>
                </div>
            </div>

            <h3>6.2 Agents</h3>

            <div class="object-card">
                <h4>AuditAgent</h4>
                <div class="extends">extends Object â†’ flow.agent.Agent</div>

                <div class="attributes">
                    <h5>ResponsabilitÃ©</h5>
                    <ul>
                        <li>Interroger l'IA (ChatGPT MVP)</li>
                        <li>Parser les rÃ©ponses</li>
                        <li>Extraire mentions entreprises</li>
                        <li>DÃ©tecter position de l'entreprise cible</li>
                    </ul>
                </div>

                <div class="methods">
                    <h5>MÃ©thodes</h5>
                    <ul>
                        <li><code>execute(queries: List[str], provider: AIProvider) â†’ List[QueryResult]</code></li>
                        <li><code>query_ai(query: str) â†’ AIResponse</code></li>
                        <li><code>extract_companies(response: str) â†’ List[str]</code></li>
                    </ul>
                </div>
            </div>

            <div class="object-card">
                <h4>AnalyzeAgent</h4>
                <div class="extends">extends Object â†’ flow.agent.Agent</div>

                <div class="attributes">
                    <h5>ResponsabilitÃ©</h5>
                    <ul>
                        <li>Calculer score de visibilitÃ© (0-100)</li>
                        <li>Identifier concurrents visibles</li>
                        <li>DÃ©tecter Ã©carts (gaps)</li>
                        <li>Prioriser recommandations</li>
                    </ul>
                </div>

                <div class="methods">
                    <h5>MÃ©thodes</h5>
                    <ul>
                        <li><code>execute(results: List[QueryResult]) â†’ CompetitorAnalysis</code></li>
                        <li><code>calculate_visibility_score(results: List[QueryResult]) â†’ float</code></li>
                        <li><code>identify_gaps(target: str, competitors: List[str]) â†’ List[Gap]</code></li>
                    </ul>
                </div>
            </div>

            <div class="object-card">
                <h4>GenerateAgent</h4>
                <div class="extends">extends Object â†’ flow.agent.Agent</div>

                <div class="attributes">
                    <h5>ResponsabilitÃ©</h5>
                    <ul>
                        <li>GÃ©nÃ©rer contenus optimisÃ©s IA</li>
                        <li>CrÃ©er donnÃ©es structurÃ©es (JSON-LD)</li>
                        <li>Produire guide d'intÃ©gration</li>
                        <li>GÃ©nÃ©rer maquettes HTML (plan Pro)</li>
                    </ul>
                </div>

                <div class="methods">
                    <h5>MÃ©thodes</h5>
                    <ul>
                        <li><code>execute(analysis: CompetitorAnalysis) â†’ List[OptimizationRecommendation]</code></li>
                        <li><code>generate_content(gap: Gap) â†’ str</code></li>
                        <li><code>generate_structured_data(company: str) â†’ dict</code></li>
                        <li><code>generate_guide(recommendations: List) â†’ str</code></li>
                    </ul>
                </div>
            </div>

            <h3>6.3 Validator</h3>

            <div class="object-card">
                <h4>Validator</h4>
                <div class="extends">extends Object â†’ flow.validator.Validator</div>

                <div class="attributes">
                    <h5>ResponsabilitÃ©</h5>
                    <ul>
                        <li>Valider conformitÃ© MANIFEST EURKAI</li>
                        <li>VÃ©rifier cohÃ©rence donnÃ©es entre Ã©tapes</li>
                        <li>Signaler erreurs / incohÃ©rences</li>
                    </ul>
                </div>

                <div class="methods">
                    <h5>MÃ©thodes</h5>
                    <ul>
                        <li><code>validate_audit_results(results: List[QueryResult]) â†’ ValidationResult</code></li>
                        <li><code>validate_analysis(analysis: CompetitorAnalysis) â†’ ValidationResult</code></li>
                        <li><code>validate_recommendations(recs: List[OptimizationRecommendation]) â†’ ValidationResult</code></li>
                    </ul>
                </div>
            </div>

            <h3>6.4 Flux orchestrÃ©</h3>

            <div class="architecture-diagram">
                <pre>
AuditOrchestrator.execute(audit_session)
  â”‚
  â”œâ”€â–º AuditAgent.execute(queries, provider)
  â”‚     â””â”€â–º [QueryResult, QueryResult, ...]
  â”‚
  â”œâ”€â–º Validator.validate_audit_results(results)
  â”‚     â””â”€â–º ValidationResult(ok=True)
  â”‚
  â”œâ”€â–º AnalyzeAgent.execute(results)
  â”‚     â””â”€â–º CompetitorAnalysis
  â”‚
  â”œâ”€â–º Validator.validate_analysis(analysis)
  â”‚     â””â”€â–º ValidationResult(ok=True)
  â”‚
  â”œâ”€â–º GenerateAgent.execute(analysis)
  â”‚     â””â”€â–º [Recommendation, Recommendation, ...]
  â”‚
  â”œâ”€â–º Validator.validate_recommendations(recommendations)
  â”‚     â””â”€â–º ValidationResult(ok=True)
  â”‚
  â””â”€â–º Return AuditSession (completed)
                </pre>
            </div>
        </div>

        <div class="section" id="modules">
            <h2>7. Modules rÃ©utilisables (EURKAI/MODULES/)</h2>

            <h3>7.1 Modules Ã  extraire</h3>

            <div class="highlight">
                <h4>Module API_AGGREGATOR</h4>
                <p>Orchestration multi-API IA (ChatGPT, Claude, Gemini, Perplexity)</p>
                <ul>
                    <li>Gestion rate limiting par provider</li>
                    <li>Retry automatique sur erreur</li>
                    <li>Cache rÃ©ponses (Redis)</li>
                    <li>Parse unifiÃ© des rÃ©ponses</li>
                </ul>
            </div>

            <div class="highlight">
                <h4>Module SEMANTIC_ANALYZER</h4>
                <p>Analyse cohÃ©rence sÃ©mantique et extraction entitÃ©s</p>
                <ul>
                    <li>Extraction mentions entreprises (NLP lÃ©ger)</li>
                    <li>DÃ©tection sentiment (positif/neutre/nÃ©gatif)</li>
                    <li>Calcul similaritÃ© sÃ©mantique</li>
                </ul>
            </div>

            <div class="highlight">
                <h4>Module COMPETITOR_TRACKER</h4>
                <p>Suivi automatisÃ© de la concurrence</p>
                <ul>
                    <li>Identification concurrents par secteur</li>
                    <li>Ranking par visibilitÃ©</li>
                    <li>Alertes sur changements (version Enterprise)</li>
                </ul>
            </div>

            <div class="highlight">
                <h4>Module CONTENT_GENERATOR</h4>
                <p>GÃ©nÃ©ration contenus optimisÃ©s IA</p>
                <ul>
                    <li>Templates sectoriels (restaurant, coaching, etc.)</li>
                    <li>JSON-LD Schema.org</li>
                    <li>Maquettes HTML responsives</li>
                    <li>Guides d'intÃ©gration multiplateforme (WordPress, Wix, Shopify, HTML)</li>
                </ul>
            </div>
        </div>

        <div class="section" id="frontend">
            <h2>8. Frontend</h2>

            <h3>8.1 Pages</h3>

            <h4>1. Landing page (<code>/</code>)</h4>
            <ul>
                <li>Hero section : titre accrocheur + CTA "Audit gratuit"</li>
                <li>BÃ©nÃ©fices : 3 blocs (rapide/gratuit/actionnable)</li>
                <li>Formulaire audit inline (company, sector, location, email)</li>
                <li>Social proof : logos entreprises / tÃ©moignages (fake si MVP)</li>
                <li>Pricing tableau : Freemium / Starter / Pro</li>
                <li>FAQ : 5-8 questions courantes</li>
                <li>Footer : liens lÃ©gaux (CGV, Mentions lÃ©gales, Privacy)</li>
            </ul>

            <h4>2. Page rÃ©sultats audit (<code>/audit/{audit_id}</code>)</h4>
            <ul>
                <li>Score de visibilitÃ© (gauge 0-100)</li>
                <li>Graphique comparaison concurrents (bar chart)</li>
                <li>Tableau requÃªtes testÃ©es (prÃ©sence, position)</li>
                <li>Liste recommandations priorisÃ©es (accordÃ©on)</li>
                <li>CTA upgrade (si freemium) : "DÃ©bloquer solutions complÃ¨tes"</li>
                <li>Bouton tÃ©lÃ©charger guide PDF (si payant)</li>
            </ul>

            <h4>3. Page paiement Stripe</h4>
            <ul>
                <li>Redirection vers Stripe Checkout</li>
                <li>Success : retour sur /audit/{audit_id} avec accÃ¨s complet</li>
                <li>Cancel : retour sur /audit/{audit_id} avec message</li>
            </ul>

            <h3>8.2 Design systÃ¨me</h3>
            <ul>
                <li><strong>Palette</strong> : DÃ©gradÃ© violet (#667eea â†’ #764ba2), gris (#f7fafc, #edf2f7), vert (#48bb78)</li>
                <li><strong>Typo</strong> : System fonts (-apple-system, BlinkMacSystemFont, Segoe UI, Roboto)</li>
                <li><strong>Components</strong> : Boutons primaires (gradient), cartes (box-shadow), accordÃ©ons, formulaires</li>
                <li><strong>Responsive</strong> : Mobile-first, breakpoints 640px, 768px, 1024px</li>
            </ul>
        </div>

        <div class="section" id="plan">
            <h2>9. Plan de dÃ©veloppement MVP</h2>

            <h3>9.1 Phase 1 : Setup (4h)</h3>

            <div class="milestone">
                <h4>Jour 1 matin</h4>
                <div class="duration">DurÃ©e : 4h</div>
                <ul>
                    <li>âœ“ CrÃ©er structure dossiers selon specs</li>
                    <li>âœ“ Initialiser projet Python (venv, requirements.txt)</li>
                    <li>âœ“ Configurer FastAPI (main.py, routes basiques)</li>
                    <li>âœ“ Setup PostgreSQL (docker-compose, connexion)</li>
                    <li>âœ“ Setup Redis (docker-compose, connexion)</li>
                    <li>âœ“ CrÃ©er models SQLAlchemy (5 tables)</li>
                    <li>âœ“ Initialiser Alembic + premiÃ¨re migration</li>
                    <li>âœ“ Test connexion DB + insertion test</li>
                </ul>
            </div>

            <h3>9.2 Phase 2 : Objets EURKAI Core (6h)</h3>

            <div class="milestone">
                <h4>Jour 1 aprÃ¨s-midi</h4>
                <div class="duration">DurÃ©e : 6h</div>
                <ul>
                    <li>âœ“ CrÃ©er Object base (core/object.py)</li>
                    <li>âœ“ CrÃ©er AuditSession (domain/audit_session.py)</li>
                    <li>âœ“ CrÃ©er AIProvider (interface/ai_provider.py)</li>
                    <li>âœ“ CrÃ©er CompetitorAnalysis (domain/competitor_analysis.py)</li>
                    <li>âœ“ CrÃ©er OptimizationRecommendation (domain/optimization_recommendation.py)</li>
                    <li>âœ“ CrÃ©er SectorTemplate (config/sector_template.py)</li>
                    <li>âœ“ Tests unitaires objets (validate(), to_dict())</li>
                </ul>
            </div>

            <h3>9.3 Phase 3 : Agents & Orchestrateur (8h)</h3>

            <div class="milestone">
                <h4>Jour 2 matin + aprÃ¨s-midi</h4>
                <div class="duration">DurÃ©e : 8h</div>
                <ul>
                    <li>âœ“ CrÃ©er AuditAgent (orchestrator/agents/audit_agent.py)</li>
                    <li>âœ“ IntÃ©gration OpenAI API (GPT-4o-mini)</li>
                    <li>âœ“ Parse rÃ©ponses + extraction mentions</li>
                    <li>âœ“ CrÃ©er AnalyzeAgent (analyze_agent.py)</li>
                    <li>âœ“ Calcul score visibilitÃ© (algorithme simple)</li>
                    <li>âœ“ Identification concurrents + gaps</li>
                    <li>âœ“ CrÃ©er GenerateAgent (generate_agent.py)</li>
                    <li>âœ“ GÃ©nÃ©ration contenus optimisÃ©s (templates Jinja2)</li>
                    <li>âœ“ GÃ©nÃ©ration JSON-LD Schema.org</li>
                    <li>âœ“ CrÃ©er Validator (validator.py)</li>
                    <li>âœ“ CrÃ©er AuditOrchestrator (audit_orchestrator.py)</li>
                    <li>âœ“ Tests intÃ©gration orchestrateur â†’ agents</li>
                </ul>
            </div>

            <h3>9.4 Phase 4 : API Endpoints (6h)</h3>

            <div class="milestone">
                <h4>Jour 3 matin</h4>
                <div class="duration">DurÃ©e : 6h</div>
                <ul>
                    <li>âœ“ POST /api/audit/create</li>
                    <li>âœ“ GET /api/audit/{id}/status (polling)</li>
                    <li>âœ“ GET /api/audit/{id}/results</li>
                    <li>âœ“ POST /api/payment/create-checkout (Stripe)</li>
                    <li>âœ“ POST /api/payment/webhook (Stripe)</li>
                    <li>âœ“ GET /api/export/{id}/guide.pdf (WeasyPrint)</li>
                    <li>âœ“ Tests API (pytest + httpx)</li>
                </ul>
            </div>

            <h3>9.5 Phase 5 : Frontend (8h)</h3>

            <div class="milestone">
                <h4>Jour 3 aprÃ¨s-midi + Jour 4 matin</h4>
                <div class="duration">DurÃ©e : 8h</div>
                <ul>
                    <li>âœ“ Landing page (HTML/CSS, formulaire audit)</li>
                    <li>âœ“ Pricing tableau (3 plans)</li>
                    <li>âœ“ Page rÃ©sultats audit (score, graph, recommandations)</li>
                    <li>âœ“ IntÃ©gration Stripe Checkout (JS)</li>
                    <li>âœ“ Page succÃ¨s paiement</li>
                    <li>âœ“ Export PDF (bouton tÃ©lÃ©charger)</li>
                    <li>âœ“ Responsive mobile/tablet/desktop</li>
                </ul>
            </div>

            <h3>9.6 Phase 6 : Tests & Deploy (4h)</h3>

            <div class="milestone">
                <h4>Jour 4 aprÃ¨s-midi</h4>
                <div class="duration">DurÃ©e : 4h</div>
                <ul>
                    <li>âœ“ Tests end-to-end (audit complet freemium)</li>
                    <li>âœ“ Tests end-to-end (audit payant + Stripe test)</li>
                    <li>âœ“ Dockerfile + docker-compose final</li>
                    <li>âœ“ Deploy sur Railway / Render</li>
                    <li>âœ“ Config domaine + HTTPS</li>
                    <li>âœ“ Monitoring basique (logs)</li>
                </ul>
            </div>

            <h3>9.7 RÃ©capitulatif temps</h3>

            <table>
                <thead>
                    <tr>
                        <th>Phase</th>
                        <th>DurÃ©e</th>
                        <th>CumulÃ©</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Setup</td>
                        <td>4h</td>
                        <td>4h</td>
                    </tr>
                    <tr>
                        <td>Objets EURKAI</td>
                        <td>6h</td>
                        <td>10h</td>
                    </tr>
                    <tr>
                        <td>Agents & Orchestrateur</td>
                        <td>8h</td>
                        <td>18h</td>
                    </tr>
                    <tr>
                        <td>API Endpoints</td>
                        <td>6h</td>
                        <td>24h</td>
                    </tr>
                    <tr>
                        <td>Frontend</td>
                        <td>8h</td>
                        <td>32h</td>
                    </tr>
                    <tr>
                        <td>Tests & Deploy</td>
                        <td>4h</td>
                        <td>36h</td>
                    </tr>
                </tbody>
            </table>

            <p><strong>Total MVP Light : 36 heures (4-5 jours si 8h/jour)</strong></p>
        </div>

        <div class="section" id="post-mvp">
            <h2>10. Post-MVP immÃ©diat</h2>

            <h3>10.1 Ã‰volutions prioritaires (2 semaines)</h3>

            <div class="milestone">
                <h4>Semaine 1 post-MVP</h4>
                <ul>
                    <li>âœ“ IntÃ©gration Claude API (Anthropic)</li>
                    <li>âœ“ IntÃ©gration Gemini API (Google)</li>
                    <li>âœ“ IntÃ©gration Perplexity API</li>
                    <li>âœ“ Comparaison inter-IA (dashboard multi-providers)</li>
                    <li>âœ“ Score agrÃ©gÃ© (moyenne pondÃ©rÃ©e 4 IA)</li>
                    <li>âœ“ Cache Redis rÃ©sultats IA (24h)</li>
                    <li>âœ“ Rate limiting intelligent par provider</li>
                </ul>
            </div>

            <div class="milestone">
                <h4>Semaine 2 post-MVP</h4>
                <ul>
                    <li>âœ“ Templates sectoriels (5 secteurs : restaurant, coaching, agence, ecommerce, immobilier)</li>
                    <li>âœ“ Multilingue (FR, EN, ES, DE, IT)</li>
                    <li>âœ“ DÃ©tection auto langue navigateur</li>
                    <li>âœ“ Redirection .com?l=XX</li>
                    <li>âœ“ Landing page optimisÃ©e (A/B test CTA)</li>
                    <li>âœ“ Maquettes HTML complÃ¨tes (plan Pro)</li>
                    <li>âœ“ Guides dÃ©taillÃ©s 8-12 pages (avec screenshots Nathalie)</li>
                </ul>
            </div>

            <h3>10.2 Features Enterprise (diffÃ©rÃ©)</h3>

            <div class="warning">
                <h4>â¸ï¸ Pas prioritaire pour MVP</h4>
                <ul>
                    <li>Suivi mensuel automatisÃ© (Ã©volution score)</li>
                    <li>Alertes changements visibilitÃ©</li>
                    <li>IntÃ©gration Google My Business</li>
                    <li>IntÃ©gration Ahrefs / SEMrush</li>
                    <li>Dashboard analytics avancÃ©</li>
                    <li>API publique pour partenaires</li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“ Notes finales</h2>

            <h3>ConformitÃ© EURKAI</h3>
            <ul>
                <li>âœ… Tous les objets hÃ©ritent d'<code>Object</code></li>
                <li>âœ… Architecture fractale (Orchestrator â†’ Agents â†’ Validator)</li>
                <li>âœ… Atome = function (une fonction fait UNE chose)</li>
                <li>âœ… Method = import function (flexibilitÃ©)</li>
                <li>âœ… Scenario = orchestration (ne fait rien lui-mÃªme)</li>
                <li>âœ… Modules rÃ©utilisables identifiÃ©s (API_AGGREGATOR, SEMANTIC_ANALYZER, etc.)</li>
            </ul>

            <h3>Prochaines Ã©tapes</h3>
            <ol>
                <li><strong>Validation SPECS</strong> par Nathalie (formulaire HTML)</li>
                <li><strong>BUILD MVP</strong> selon plan 36h ci-dessus</li>
                <li><strong>Tests utilisateurs</strong> (5-10 entreprises pilotes)</li>
                <li><strong>ItÃ©ration</strong> selon feedback</li>
                <li><strong>Post-MVP</strong> immÃ©diat (multi-IA, multilingue)</li>
            </ol>
        </div>
    </div>
</body>
</html>
